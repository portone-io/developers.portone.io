---
title: 오픈 전 체크리스트
description: 결제 오픈전 자가진단을 해볼수 있는 오픈 전 체크사항 리스트 입니다.
targetVersions: ["v2"]
versionVariants:
  v1: /opi/ko/integration/checklist/readme-v1
---

💡 서비스를 운영 시스템에 적용하기 전에 놓치기 쉬운 항목을 체크하여 운영장애를 사전에 방지합니다.

## ✍️ 서비스 공통

- **포트원 콘솔의 시스템설정이 운영정보로 설정**
  - [ ] storeId를 확인하였습니다.
  - [ ] 채널별 PG사 운영 정보(MID, Secret Key 등)를 설정하였습니다.
  - [ ] 테스트모드를 OFF로 설정하였습니다.
  - [ ] V2 API Secret을 발급받아 안전하게 보관하였습니다.
  - [ ] 웹훅 버전을 2024-04-25(최신)로 설정하였습니다.
  - [ ] 웹훅 URL을 운영 서버 정보로 설정하였습니다.
  - [ ] 웹훅 시크릿을 발급받아 환경변수로 관리하고 있습니다.
  - [ ] 카드 사용/고객사 이자부담 할부설정을 확인하였습니다.
  - [ ] 스마트 라우팅 사용 시 라우팅 그룹을 적절히 설정하였습니다.
  - [ ] 프로모션 사용 시 프로모션 설정을 확인하였습니다.

- **SDK 및 API 연동**
  - [ ] @portone/browser-sdk를 최신 버전으로 설치하였습니다.
  - [ ] 서버 SDK(@portone/server-sdk 등)를 설치하여 웹훅 검증에 사용하고 있습니다.
  - [ ] TypeScript를 사용하는 경우 타입 정보가 정상적으로 인식됩니다.
  - [ ] redirectUrl을 운영 환경 URL로 설정하였습니다.

- **결제창 정상 호출 및 결과처리**
  - [ ] 결제창 호출 시 올바른 storeId와 channelKey를 사용하였습니다.
  - [ ] paymentId를 고유하게 생성하여 중복 결제를 방지하였습니다.
  - [ ] 결제 완료 후 서버에서 결제 검증 API를 호출하여 위변조를 방지하였습니다.
  - [ ] 결제 금액과 주문 금액이 일치하는지 검증하는 로직이 있습니다.
  - [ ] 웹훅으로 결제 결과를 수신하고 signature 검증을 수행합니다.
  - [ ] 웹훅에 대해 HTTP 200으로 응답하였습니다.
  - [ ] 웹훅 재전송에 대한 중복 처리 로직이 있습니다.
  - [ ] 결제/취소 중 통신오류로 결과를 확정 지을 수 없을 경우에 대한 처리로직이 있습니다.
  - [ ] 결제/취소 실패사유별 재처리 로직이 있습니다.
  - [ ] 결제/취소에 대한 전표내역을 확인할 수 있는 기능을 제공하거나 안내할 수 있습니다.
  - [ ] 주요 항목으로 데이터를 확인할 수 있습니다.(paymentId / transactionId / pgTxId)

⚠️ 결제수단별 확인사항을 체크합니다.

## 💳신용카드

- [ ] 모든 카드사 심사가 완료되었으며 승인, 전체/부분취소 테스트를 완료하였습니다.
- [ ] 할부 및 무이자 설정이 결제창 내에 정상적으로 표시되는 것을 확인하였습니다.
- [ ] 체크/신용/해외 카드에 대해 정상적으로 결제/취소되었습니다.(해외카드는 별도의 계약 필요)
- [ ] 면세/과세 금액 설정 시 PG사 어드민 / 매출전표 표시내용과 일치합니다.
- [ ] 빌링키 발급 시 requestIssueBillingKey() 또는 requestIssueBillingKeyAndPay()를 적절히 사용하였습니다.
- [ ] 빌링키를 이용한 결제 시 서버 API를 통해 안전하게 처리하였습니다.
- [ ] 결제 실패 시 해당 빌링키를 삭제하고 새로운 결제 정보로 빌링키를 새로 취득하고 결제할 수 있습니다.

## 💵가상계좌

- [ ] 발급된 가상계좌의 은행코드로 은행명을 인식할 수 있습니다.
- [ ] 발급된 가상계좌를 납부자에게 전달하고 삭제할 수 있습니다.
- [ ] VIRTUAL\_ACCOUNT\_ISSUED 상태를 정상적으로 처리합니다.
- [ ] 입금 완료(PAID) 웹훅을 수신하고 시스템에 반영할 수 있습니다.
- [ ] 입금 취소 시 이를 시스템에 반영할 수 있습니다.
- [ ] 환불 요청 시 환불을 요청하고 이를 처리할 수 있습니다.

## 💸 계좌이체

- [ ] 출금이체한 은행코드로 은행명을 인식할 수 있습니다.
- [ ] 환불 요청 시 환불을 요청하고 이를 처리할 수 있습니다.

## 📱휴대전화

- [ ] 모든 통신사 심사가 완료되었으며 승인, 전체/부분취소 테스트를 완료하였습니다.
  - 부분취소 지원 여부는 PG사별로 상이함

- [ ] 정상 승인거래에 대해 당월에 한해 취소 처리할 수 있습니다.

## 🙋 본인인증

- [ ] requestIdentityVerification() 함수로 본인인증을 정상적으로 호출합니다.
- [ ] identityVerificationId를 고유하게 생성하여 중복 인증을 방지하였습니다.
- [ ] 본인인증 완료 후 서버에서 인증 정보 조회 API를 호출하여 검증합니다.
- [ ] CI/DI 정보를 적절히 활용하여 중복가입 방지 등의 로직을 구현하였습니다.
- [ ] 외국인 여부에 대한 확인이 필요할 경우 계약 완료 여부를 확인하였습니다.

## 🧾현금영수증

- [ ] 발급된 영수증을 조회 및 취소할 수 있습니다.
- [ ] 포트원을 통한 거래와 이외 거래를 구분하여 처리할 수 있습니다.

⚠️ 제공하는 결제환경에서 모든 케이스를 테스트합니다.

|OS / 브라우져|IE / Edge|Chrome|Safari|FireFox|Whale|포털 웹뷰|SNS 웹뷰|
|-------------|---------|------|------|-------|-----|---------|--------|
|Window       |         |      |      |       |     |         |        |
|Mac OS       |         |      |      |       |     |         |        |
|Android      |         |      |      |       |     |         |        |
|iOS          |         |      |      |       |     |         |        |

- [ ] 모바일 환경에서 redirectUrl이 정상적으로 동작합니다.
- [ ] iOS에서 결제사 외부앱 연동을 위한 URL Scheme 처리가 되어있습니다.
- [ ] 모바일 앱에서 결제 후 앱으로 정상적으로 돌아옵니다.

## 🔒 보안 및 안정성

- [ ] API Secret과 웹훅 시크릿을 코드에 하드코딩하지 않고 환경변수로 관리합니다.
- [ ] HTTPS 환경에서 결제가 진행됩니다.
- [ ] 프론트엔드에서 결제 금액을 조작할 수 없도록 서버 검증이 구현되어 있습니다.
- [ ] 에러 발생 시 고객에게 적절한 안내 메시지를 표시합니다.
- [ ] 로깅 시스템을 통해 결제 관련 이벤트를 추적할 수 있습니다.

## 📋 웹훅 처리

- [ ] 모든 웹훅 이벤트 타입(Transaction._, BillingKey._)에 대한 처리 로직이 있습니다.
- [ ] 알 수 없는 웹훅 타입이나 필드는 무시하도록 구현되어 있습니다.
- [ ] 웹훅 재전송 시 멱등성이 보장됩니다.
- [ ] 웹훅 처리 실패 시 재시도 로직을 고려하였습니다.
- [ ] Connection/Read Timeout(30초)을 고려하여 처리 시간을 최적화하였습니다.

## 🚀 V2 전용 기능

- [ ] TypeScript 타입 지원을 활용하여 개발 생산성을 높였습니다.
- [ ] 스마트 라우팅 사용 시 failover 시나리오를 테스트하였습니다.
- [ ] 프로모션 기능 사용 시 할인 금액이 정확히 계산되는지 확인하였습니다.
- [ ] loadPaymentUI() 사용 시 UI 커스터마이징이 의도대로 동작합니다.
- [ ] 여러 PG사를 사용하는 경우 각 채널별로 테스트를 완료하였습니다.
