import Figure from '~/components/Figure';
import Hint from "~/components/Hint";

import image1 from "./assets/kcp-v2.png";
import image2 from "./assets/kcp-v2-1.png";
import image3 from "./assets/kcp-v2-2.png";
import image4 from "./assets/kcp-v2-3.png";
import image5 from "./assets/kcp4.png";
import image6 from "./assets/kcp5.png";

<Hint style="danger">
  포트원 V2에서 제공하는 KCP의 경우 **KCP의 PG-API방식**만 지원합니다. 따라서 아래와 같이 인증서 발급 후
  사용할 수 있습니다.

  해당 인증서의 경우 유효기간은 <mark style="color:red;">**5년**</mark>이며, 유효기간 만료 30일전부터 갱신이 가능합니다.

  **서비스 인증서의 유효기간이 만료되거나 폐기된 경우** 즉시 결제 승인/취소 등 관련
  <mark style="color:red;">**서비스 이용이 불가능**</mark>하오니
  서비스 사용을 위해서 인증서를 재발급이 필요한 후 **포트원에 저장된 채널 정보를 업데이트** 해야 합니다.
</Hint>

1. [KCP 파트너관리자](https://partner.kcp.co.kr/) 접속 후 로그인을 합니다.

2. \[고객센터]→\[인증센터]→\[KCP PG-API]를 클릭합니다.

   <Figure src={image1} caption="NHN KCP 파트너관리자 내 [고객센터] - [PG-API 인증서] 예시 화면" />

3. KCP PG-API 발급 버튼을 클릭합니다.

4. 파트너 관리자 비밀번호(로그인시 입력한 비밀번호)를 입력한 후 다음을 클릭합니다.

   <Figure src={image2} caption="[PG-API 인증서] 발급시 [파트너 관리자 비밀번호 입력] 화면" />

5. 사용할 개인키 비밀번호를 입력한 후 다음을 클릭합니다.

   - 개인키 비밀번호를 분실하신 경우 확인이 불가함으로 폐기 후 재발급해야 합니다.

   - 개인키를 폐기하는 즉시 기존에 사용하던 개인키와 서비스 인증서 사용이 불가능하며,
     결제 승인/취소/조회가 불가능하오니 잘 보관하시길 바랍니다.

   <Figure src={image3} caption="[PG-API 인증서] 발급시 [개인키 비밀번호 등록] 화면" />

6. KCP PG-API 개인키 및 서비스 인증서 발급이 완료되면 로컬에 .zip 파일이 다운로드 됩니다.

   - 서비스 인증서의 유효기간은 발급일로부터 5년으로, 유효기간 만료 30일전부터 갱신이 가능합니다.
   - 서비스 인증서의 유효기간이 만료되었거나 폐기한 경우 원활한 서비스 사용을 위해 인증서를 재발급해주세요.

   <Figure src={image4} caption="[PG-API 인증서] 발급 완료 화면" />

7. 로컬내에서 압축 풀면 `KCP_AUTH_{$사이트코드}_CERT.pem` 파일과 `KCP_AUTH_{$사이트코드}_PRIKEY.pem` 파일을 확인할 수 있습니다.

8. 포트원 콘솔에서 채널 추가 시 \[MID(사이트코드)], \[PG-API 인증서키], \[PG-API 개인키], \[개인키 비밀번호]를
   입력한 후 저장을 클릭합니다.

9. 정기결제를 이용하시는 경우, 아래 절차를 진행해주세요.

   <div class="[&_li]:list-latin">
     1. [KCP 파트너관리자](https://partner.kcp.co.kr/) 접속 후 로그인을 합니다.
     2. \[결제관리]→\[정기자동결제 그룹관리]→\[그룹등록]을 클릭합니다.
     3. \[상점정보]→\[사이트코드]에서 그룹등록할 사이트코드를 선택합니다.
     4. \[그룹정보]에서 \[유형3]을 선택한 후 원하는 그룹명을 입력합니다.
     5. \[결제입력 정보]에서 \[결제유형] 및 \[납부유형]을 확인하시고 고객사 유형에 맞게 선택합니다.
     6. \[고지방법]에서 원하시는 고지 방법을 선택한 후 \[등록하기]를 클릭합니다.

     <Figure src={image5} caption="KCP 파트너관리자 내 관리용 그룹등록 화면" />

     7. \[결제관리]→\[정기자동결제 그룹관리]→\[그룹조회]를 클릭합니다.
     8. \[사이트코드]에서 사용한 사이트코드를 선택한 후 \[검색]을 클릭합니다.

     <Figure src={image6} caption="KCP 파트너관리자 내 관리용 그룹조회 화면" />

     9. 포트원 콘솔에서 채널 추가 시 앞서 발급한  \[MID(사이트코드)], \[PG-API 인증서키], \[PG-API 개인키],
        \[개인키 비밀번호], \[정기자동결제 그룹아이디]를 입력한 후 \[저장]을 클릭합니다.
   </div>
