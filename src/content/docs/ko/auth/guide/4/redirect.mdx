---
emoji: π–Ό
title: redirect κ²°μ μ°½ κ²°κ³Όμ²λ¦¬
description: μƒλ΅μ΄ μ°½μΌλ΅ λ¦¬λ””λ ‰μ…λμ–΄ κ²°μ κ°€ μ§„ν–‰λλ” ν™κ²½μ—μ„μ κ²°κ³Ό μ²λ¦¬ λ°©λ²•μ„ μ•λ‚΄ν•©λ‹λ‹¤.
---

import * as prose from "~/components/prose";
export const components = prose;

import ContentRef from "~/components/gitbook/ContentRef.astro";
import Hint from "~/components/gitbook/Hint.astro";
import Tabs from "~/components/gitbook/tabs/Tabs.astro";
import Tab from "~/components/gitbook/tabs/Tab.astro";

> μ•„λ μμ  μ½”λ“λ” κ²°μ μ°½ ν•νƒκ°€ **μƒλ΅μ΄ νμ΄μ§€λ΅ λ¦¬λ””λ ‰μ…λμ–΄** κ²°μ κ°€ μ§„ν–‰λλ” λ€λ¶€λ¶„μ **λ¨λ°”μΌ ν™κ²½**μ—μ„μ κ²°μ μ”μ²­μ•  λ€ν• μ‘λ‹µμ„ μ²λ¦¬ν•λ” λ¶€λ¶„μ…λ‹λ‹¤.

<ContentRef slug="/ko////tip/redirect" />

<Tabs>
<Tab title="JavaScript">
```javascript
IMP.request_pay({
  /* κ²°μ  μ”μ²­ κ°μ²΄λ¥Ό μ±„μ›μ£Όμ„Έμ”. */
  m_redirect_url: "{λ¦¬λ””λ ‰μ… λ  URL}"
}, /* callback */); // λ¦¬λ””λ ‰μ… λ°©μ‹μ κ²½μ° callbackμ€ μ‹¤ν–‰λμ§€ μ•μµλ‹λ‹¤.
```

</Tab>
</Tabs>

μ„μ™€ κ°™μ΄ **request_pay** ν•¨μ νλΌλ―Έν„°λ΅ **m_redirect_url** μ„ μ„¤μ •ν•λ©΄ <mark style="color:blue;">**κ²°μ  μ™„λ£**</mark> μ΄ν›„ ν•΄λ‹Ή URL μ£Όμ†λ΅ κ²°μ  κ²°κ³Όλ¥Ό **μΏΌλ¦¬μ¤νΈλ§(Query String)** ν•νƒλ΅ μ „μ†΅ν•΄ λ“λ¦½λ‹λ‹¤.

<Hint style="info">
**Query String μ΄λ€?**

URL λ’¤μ— λ°μ΄ν„°λ¥Ό μ „λ‹¬ν•λ” κ°€μ¥ λ‹¨μν• λ°©λ²•μΌλ΅ μ£Όλ΅ GET μ”μ²­κ³Ό ν•¨κ» λ°μ΄ν„°λ¥Ό μ „μ†΅ν•  λ• μ‚¬μ©ν•©λ‹λ‹¤.

</Hint>

κ²°μ  κ²°κ³Όλ¥Ό μμ‹ λ°›μ„ endpoint url μ£Όμ†λ¥Ό m_redirect_url μ— μ„¤μ •ν•μ‹λ©΄ κ²°μ κ²°κ³Ό μμ‹ μ΄ κ°€λ¥ν•©λ‹λ‹¤.

μ•„λ νλΌλ―Έν„°λ¥Ό μ„¤μ •ν•μ‹  URL μ„ ν†µν•΄ Query String ν•νƒλ΅ μμ‹ λ°›μ„μ μμµλ‹λ‹¤.

μ•„λλ” Query String μΌλ΅ λ¦¬λ””λ ‰μ…λλ” URL μμ μ…λ‹λ‹¤.

<Tabs>
<Tab title="κ²°μ μ™„λ£/κ°€μƒκ³„μΆ λ°κΈ‰μ™„λ£">
```url
curl https://myservice.com/payments/complete?imp_uid=κ²°μ κ±΄μ„_νΉμ •ν•λ”_ν¬νΈμ›_λ²νΈ&merchant_uid=κ°€λ§Ήμ _κ³ μ _μ£Όλ¬Έλ²νΈ&imp_success=true
```

</Tab>

<Tab title="κ²°μ  μ‹¤ν¨">
```
curl https://myservice.com/payments/complete?imp_uid=κ²°μ κ±΄μ„_νΉμ •ν•λ”_ν¬νΈμ›_λ²νΈ&merchant_uid=κ°€λ§Ήμ _κ³ μ _μ£Όλ¬Έλ²νΈ&imp_success=false&error_code=μ—λ¬_μ½”λ“(ν„μ¬_μ •λ¦¬λ_μ²΄κ³„λ”_μ—†μ)&error_msg=μ—λ¬_λ©”μ‹μ§€
```

</Tab>
</Tabs>

|                 νλΌλ―Έν„°λ…                 |         μ„¤λ…         |  λΉ„κ³    |
| :----------------------------------------: | :------------------: | :-----: |
|                **imp_uid**                 | ν¬νΈμ› κ²°μ  κ³ μ λ²νΈ |  κ³µν†µ   |
|              **merchant_uid**              |   κ°€λ§Ήμ  μ£Όλ¬Έλ²νΈ    |  κ³µν†µ   |
|              **imp_success**               |    κ²°μ  μ„±κ³µ μ—¬λ¶€    |  κ³µν†µ   |
| <mark style="color:red;">error_code</mark> |      μ¤λ¥ μ½”λ“       | μ‹¤ν¨ μ‹ |
| <mark style="color:red;">error_msg</mark>  |     μ¤λ¥ λ©”μ„Έμ§€      | μ‹¤ν¨ μ‹ |

> <mark style="color:blue;">**κ²°μ  μ™„λ£**</mark>**μ μλ―Έ**
>
> `κ²°μ μ™„λ£`λ” μ•„λμ λ¨λ“  κ²½μ°λ¥Ό ν¬ν•¨ν•©λ‹λ‹¤.
>
> 1. **κ²°μ  μ„±κ³µ**(κ²°μ  μƒνƒ: `paid`, imp_success: `true`)
> 2. **κ²°μ  μ‹¤ν¨**(κ²°μ  μƒνƒ: `failed`, imp_success: `false`)
> 3. PG λ¨λ“ μ„¤μ •μ΄ μ¬λ°”λ¥΄μ§€ μ•μ•„, **κ²°μ  μ°½μ΄ μ—΄λ¦¬μ§€ μ•μ**
> 4. μ‚¬μ©μκ°€ μ„μλ΅ X λ²„νΌμ΄λ‚ μ·¨μ† λ²„νΌμ„ λλ¬ **κ²°μ λ¥Ό μΆ…λ£**ν•¨
> 5. μΉ΄λ“ μ •λ³΄ λ¶μΌμΉ, ν•λ„ μ΄κ³Ό, μ”μ•΅ λ¶€μ΅± λ“±μ μ‚¬μ λ΅ **κ²°μ κ°€ μ¤‘λ‹¨**λ¨
> 6. κ°€μƒκ³„μΆ **λ°κΈ‰ μ™„λ£(**κ²°μ  μƒνƒ: `ready`, imp_success: `true`)

<Hint style="danger">
**κ²°μ μ°½μ΄ λ¦¬λ””λ ‰μ…λμ–΄ μƒλ΅μ΄ νμ΄μ§€μ—μ„ ν™μ„±ν™”λλ” κ²½μ° κ²°μ  κ²°κ³Όλ” callback μΌλ΅ λ°›μ„ μ μ—†μµλ‹λ‹¤.**

</Hint>

<Hint style="danger">
μµμΆ… κ²°μ κ²°κ³Ό λ΅μ§μ²λ¦¬λ” λ°λ“μ‹ [<mark style="color:red;">**μ›Ήν›…**</mark>](../../../result/webhook)μ„ μ΄μ©ν•μ—¬ μ•μ •μ μΌλ΅ μ²λ¦¬ν•΄ μ£Όμ…”μ•Ό ν•©λ‹λ‹¤.

μ›Ήν›…μ—°λ™μ„ μƒλµν•μ‹λ” κ²½μ° κ²°μ κ²°κ³Όλ¥Ό μ •μƒμ μΌλ΅ μμ‹ λ°›μ§€ λ»ν•λ” μƒν™©μ΄ λ°μƒν•©λ‹λ‹¤.

</Hint>

<Hint style="warning">
**imp\_success νλΌλ―Έν„°**

<mark style="color:red;">`imp_success`</mark> νλΌλ―Έν„°λ” **κ²°μ  ν”„λ΅μ„Έμ¤ μ •μƒ μΆ…λ£
μ—¬λ¶€**λ¥Ό μλ―Έν•©λ‹λ‹¤. ν•μ§€λ§ ν΄λΌμ΄μ–ΈνΈ μƒμ—μ„ μλ°”μ¤ν¬λ¦½νΈ ν•¨μλ¥Ό νΈμ¶ν•΄μ„ κ²°μ μ°½μ΄
μ—΄λ¦¬λ―€λ΅ **κ²°μ κΈμ•΅μ΄ μ„λ³€μ΅° λμ—μ„ κ°€λ¥μ„±**μ΄ μκΈ° λ•λ¬Έμ— **μ΄ κ°’μΌλ΅ κ²°μ μ μ„±κ³µ
μ—¬λ¶€λ¥Ό νλ‹¨ν•΄μ„λ” μ•λ©λ‹λ‹¤**. κ²°μ μ μ„±κ³µ μ—¬λ¶€μ— λ”°λΌ μ•„λμ™€ κ°™μ΄ μ²λ¦¬ν•©λ‹λ‹¤.

- imp_success = true: κ²°μ  μ •λ³΄(imp_uid, merchant_uid)λ¥Ό μ„λ²„μ— μ „λ‹¬ν•΄μ„ κ²°μ κΈμ•΅μ μ„λ³€μ΅° μ—¬λ¶€λ¥Ό κ²€μ¦ν• ν›„ μµμΆ…μ μΌλ΅ κ²°μ  μ„±κ³µ μ—¬λ¶€λ¥Ό νλ‹¨ν•΄μ•Ό ν•©λ‹λ‹¤.
- Imp_success = false: κ²°μ κ°€ μ‹¤ν¨ν–μμ„ μ‚¬μ©μμ—κ² μ•λ¦½λ‹λ‹¤.

\* μΌλ¶€ PGμ‚¬μ— ν•ν•΄ `imp_success`κ°€ μ•„λ‹ `success` νλΌλ―Έν„°κ°€ μ „λ‹¬λκ±°λ‚ μ•„μ μ „λ‹¬λμ§€ μ•λ” κ²½μ°(μ: KGμ΄λ‹μ‹μ¤ - μ‹¤μ‹κ°„ κ³„μΆμ΄μ²΄)λ„ μμΌλ‹ μ£Όμν•μ…”μ•Ό ν•©λ‹λ‹¤.

</Hint>
