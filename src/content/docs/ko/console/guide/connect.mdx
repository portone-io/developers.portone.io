---
title: 결제 연동 하기
description: ''
---



## 결제 연동 체계

- 결제 채널이란: 결제의 객체를 칭하는 명칭으로써 결제 대행사가 발급해준 credential 단위로 이루어 집니다. 해당 결제 채널을 가맹점이 직접 사용하시거나 가맹점의 하위상점에게 할당해 주실 수 있습니다.
- 실연동 : 전자 결제 신청하기를 통해서 선택 및 계약하신 결제대행사의 credential을 입력하시면 해당 결제 채널을 생성하여 sdk `imp.request_pay()` 에 해당 정보를 넣고 실 결제를 진행하실 수 있습니다.
- 테스트 연동: 네이버 페이, 토스, 페이팔을 제외한 모든 결제대행사의 테스트 credential을 사용하실 수 있습니다. 네이버 페이, 토스, 페이팔은 직접 결제대행사로부터 발급 받으시길 바랍니다.
- 결제 연동 화면에서는 가맹점 및 가맹점 소속의 하위상점 별 해당되는 위 정보를 등록, 확인, 수정 하실 수 있습니다.

## 웹훅 관리

웹훅은 가상계좌, 정기결제를 이용하시는 경우 필수 설정사항이지만,그 외에도 안정적인 결제서비스 구축을 위해 강력히 권장드리는 기능입니다. 설정 방법은 다음과 같습니다.

<figure><img src="/gitbook-assets/ko/Screen Shot 2022-11-18 at 2.56.49 PM.png" alt=""/><figcaption></figcaption></figure>

- 웹훅(Notification)발송 공통 URL : 웹훅통지를 받으실 가맹점 서버의 url을 기재해주세요.
- 호출테스트 : 기입하신 url로 수신받으실 수 있는지 호출 테스트를 해보실 수 있습니다.

## 테스트 연동 관리

<figure><img src="/gitbook-assets/ko/Screen Shot 2022-11-18 at 3.06.39 PM.png" alt=""/><figcaption></figcaption></figure>

- 테스트 연동 관리에서 가맹점이 결제 테스트를 하실 수 있는 각 결제대행사 별 테스트 상점아이디 와 그 외 credential 정보를 제공합니다.
- 특정 결제대행사의 결제를 테스트하기 위해서는 `imp.request_pay(pg = '테스트 PG.테스트 상점아이디')` 방식으로 호출하시면 됩니다.
- 페이팔, 네이버페이 와 같은 결제대행사는 직접 해당 결제대행사로 부터 테스트 상점아이디를 발급받으신 뒤 해당 결제대행사의 테스트 카드에 `정보 수정` 을 누른뒤 입력 및 등록 하신후 사용하실 수 있습니다.

## 실 연동 관리

<figure><img src="/gitbook-assets/ko/Screen Shot 2022-11-18 at 3.07.49 PM.png" alt=""/><figcaption></figcaption></figure>

<figure><img src="/gitbook-assets/ko/Screen Shot 2022-11-18 at 3.08.11 PM.png" alt=""/><figcaption></figcaption></figure>

- 실 연동 채널 카드는 전자 결제 신청하기를 통해 신청하신 결제대행사 결제 형태에 따라 각각 생성할 수 있습니다. 즉 결제대행사로부터 발급 받으신 상점아이디 및 그 외 credential을 입력하실 수 있는 카드를 모듈에 맞게 생성 하실 수 있습니다. 생성된 카드에 `정보 수정` 을 누른뒤 정보를 입력 및 저 하신뒤 해당 결제채널 정보로 실결제를 진행하실 수 있습니다.
- 동일한 pg 사더라도 결제 수단이나 결제 유형에 따라 상이한 모듈을 생성하실 수 있습니다. 이는 각 채널 카드에 상점아이디와 그 외 credential 을 입력하셔야 합니다.
  - 결제 유형: 결제창 방식의 일반결제, 간편결제, 정기결제 와 api 호출 방식의 키인 결제와 정기결제에 따라서 동일 결제대행사 내에서 상점아이디가 개별로 발급됩니다.
  - 결제 수단: 동일 pg사여도 결제 수단에 따라 상점아이디가 개별 발급되는 경우가 있습니다.
  - 그 외에도 계약 과정에서 복수 MID 발급을 신청하신 경우가 있습니다.

## 추가 설정 관리

![](</gitbook-assets/ko/image (171).png>)

- 추가 설정 관리 화면에서는 `화이트리스트 설정` 과 `내 식별코드, API Keys` 를 확인하실 수 있습니다.
- 화이트 리스트 : 포트원 관리자의 IP보안설정에 입력하는 값은 IP가 아닌 CIDR 블록방식 으로 입력하셔야 합니다.예를 들어 입력 하시고자 하는 IP가￼1.1.1.￼ 이라고 가정 했을때 해당 IP 하나만 허용하고 싶으시다면 ￼ [1.1.1.1/3](http://1.1.1.1/3)￼ 로 작성 하셔야 하고 만약￼1.1.1.￼ \~￼1.1.1.25￼ 까지의 IP대역을 모두 허용하고 싶으시다면 ￼[1.1.1.0/2](http://1.1.1.0/2)￼ 형태로 작성하시면 됩니다. 보다 자세한 표기법은 [RFC4632](https://tools.ietf.org/html/rfc4632) 를 참고부탁드립니다.

![](</gitbook-assets/ko/image (338).png>)
